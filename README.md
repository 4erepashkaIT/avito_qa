# Avito QA Internship - API Tests

Автоматизированные тесты для API микросервиса объявлений Avito.

## Описание

Проект содержит автоматизированные тест-кейсы для проверки API микросервиса, который управляет объявлениями.

#### Решение первого задания - task1.md

### Тестируемые эндпоинты

| Метод | Эндпоинт | Описание |
|-------|----------|----------|
| POST | `/api/1/item` | Создание объявления |
| GET | `/api/1/item/{id}` | Получение объявления по ID |
| GET | `/api/1/{sellerID}/item` | Получение всех объявлений продавца |
| GET | `/api/1/statistic/{id}` | Получение статистики объявления |

## Требования

- Python 3.8+
- pip

## Установка

1. Клонируйте репозиторий или скопируйте файлы проекта:

```bash
git clone <repository-url>
```

2. Создайте и активируйте виртуальное окружение:

```bash
# Linux/macOS
python3 -m venv venv
source venv/bin/activate

# Windows
python -m venv venv
venv\Scripts\activate
```

3. Установите зависимости:

```bash
pip install -r requirements.txt
```

## Запуск тестов

### Запуск всех тестов

```bash
pytest
```

### Запуск с подробным выводом

```bash
pytest -v
```

### Запуск конкретного файла тестов

```bash
pytest tests/test_create_item.py -v
pytest tests/test_get_item.py -v
pytest tests/test_get_seller_items.py -v
pytest tests/test_statistic.py -v
pytest tests/test_integration.py -v
```

### Запуск тестов по маркерам

```bash
# Только позитивные тесты
pytest -m positive

# Только негативные тесты
pytest -m negative

# Только интеграционные тесты
pytest -m integration

# Только smoke тесты
pytest -m smoke

# Тесты граничных значений
pytest -m boundary
```

### Запуск конкретного теста

```bash
pytest tests/test_create_item.py::TestCreateItemPositive::test_tc001_create_item_with_valid_data -v
```

### Генерация HTML-отчёта

```bash
pytest --html=report.html --self-contained-html
```

## Структура проекта

```
avito-qa-tests/
├── tests/
│   ├── conftest.py              # Фикстуры и конфигурация
│   ├── test_create_item.py      # Тесты создания объявлений (TC-001 - TC-016)
│   ├── test_get_item.py         # Тесты получения по ID (TC-017 - TC-021)
│   ├── test_get_seller_items.py # Тесты списка продавца (TC-022 - TC-026)
│   ├── test_statistic.py        # Тесты статистики (TC-027 - TC-030)
│   └── test_integration.py      # Интеграционные тесты (TC-031 - TC-035)
├── pytest.ini                   # Конфигурация pytest
├── requirements.txt             # Зависимости
└── README.md                    # Документация
```

## Описание тест-кейсов

### Создание объявлений (TC-001 — TC-016)

| ID | Тип | Описание |
|----|-----|----------|
| TC-001 | Позитивный | Успешное создание с валидными данными |
| TC-002 | Позитивный | Создание с нулевой ценой |
| TC-003 | Позитивный | Создание с максимальной ценой |
| TC-004 | Позитивный | Создание с длинным названием |
| TC-005 | Позитивный | Создание со спецсимволами в названии |
| TC-006 | Позитивный | Создание с ненулевой статистикой |
| TC-007 | Негативный | Создание без поля name |
| TC-008 | Негативный | Создание без поля price |
| TC-009 | Негативный | Создание без поля sellerID |
| TC-010 | Негативный | Создание без поля statistics |
| TC-011 | Негативный | Создание с отрицательной ценой |
| TC-012 | Негативный | Создание с отрицательной статистикой |
| TC-013 | Негативный | Невалидный тип price (строка) |
| TC-014 | Негативный | Невалидный тип sellerID (строка) |
| TC-015 | Негативный | Пустая строка в name |
| TC-016 | Негативный | Пустой JSON |

### Получение объявления по ID (TC-017 — TC-021)

| ID | Тип | Описание |
|----|-----|----------|
| TC-017 | Позитивный | Получение существующего объявления |
| TC-018 | Негативный | Несуществующий ID |
| TC-019 | Негативный | ID со спецсимволами (XSS) |
| TC-020 | Негативный | Пустой ID |
| TC-021 | Негативный | Очень длинный ID |

### Получение объявлений продавца (TC-022 — TC-026)

| ID | Тип | Описание |
|----|-----|----------|
| TC-022 | Позитивный | Получение списка с объявлениями |
| TC-023 | Позитивный | Продавец без объявлений |
| TC-024 | Негативный | Строка вместо числа в sellerID |
| TC-025 | Негативный | Отрицательный sellerID |
| TC-026 | Негативный | sellerID = 0 |

### Получение статистики (TC-027 — TC-030)

| ID | Тип | Описание |
|----|-----|----------|
| TC-027 | Позитивный | Статистика существующего объявления |
| TC-028 | Негативный | Несуществующий ID |
| TC-029 | Негативный | Невалидный ID |
| TC-030 | Негативный | Пустой ID |

### Интеграционные тесты (TC-031 — TC-035)

| ID | Тип | Описание |
|----|-----|----------|
| TC-031 | Интеграционный | Полный жизненный цикл объявления |
| TC-032 | Интеграционный | Несколько объявлений одного продавца |
| TC-033 | Интеграционный | Уникальность ID объявлений |
| TC-034 | Интеграционный | Изоляция данных между продавцами |
| TC-035 | Интеграционный | Проверка поля createdAt |

## Конфигурация

Диапазон sellerID: `111111 - 999999`

## Примечания

- Тесты генерируют уникальные `sellerID` для избежания конфликтов с данными других пользователей
- Некоторые негативные тесты допускают несколько возможных кодов ответа, что отражает реальное поведение API
- После выполнения тестов созданные объявления автоматически удаляются (где это возможно)
